---
title: "Lecture 13 - Theory and Homework"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook

### Lecture 13 - What Data and Manipulation Data

#### We can review the data first...

```{r, echo=TRUE}
# data frame containing information from multiple sensors
read_csv("DF_Data.csv") %>% head(3)
# data frame containing equipment information
read_csv("DF_EquipmData.csv") %>% head(3)
# data frame containing Event Names
read_csv("DF_EvCodeData.csv") %>% head(3)
```

Run the code from the App directly

```{r}
# Data manipulation and saving to the DF_TEMP
DF_TEMP <- read_csv("DF_Data.csv") %>% 
  # arrange by date 
  arrange(StartDateTime) %>% 
  # join to decode equipment serial number
  inner_join(DF_Equipm, by = "IDEquipment") %>% 
  # select only column needed
  select(StartDateTime, Name, EventCode, TimeTotal) %>% 
  # join to decode Event Code meaning
  inner_join(DF_EvCode, by = "EventCode") %>% 
  # select only column needed
  select(StartDateTime, Name, EventCode, TimeTotal, EventText)
# ================================= 
# 
head(DF_TEMP)
```

As you see we have now Start Time, Name, time total and event text

Let's review how did we get this step by step...

```{r}
# read data and arrange by start date time and ouput only 6 rows...
read_csv("DF_Data.csv") %>% 
  # arrange by date 
  arrange(StartDateTime) %>% head()
```

Now we 'join' the IDEquipment table ...

```{r}
read_csv("DF_Data.csv") %>% 
  # arrange by date 
  arrange(StartDateTime) %>% 
  # join to decode equipment serial number
  inner_join(DF_Equipm, by = "IDEquipment") %>% head()
```

Now we have additional column Name of equipment... we will repeat exact same for Event Code

```{r}
read_csv("DF_Data.csv") %>% 
  # arrange by date 
  arrange(StartDateTime) %>% 
  # join to decode equipment serial number
  inner_join(DF_Equipm, by = "IDEquipment") %>% 
  # select only column needed
  select(StartDateTime, Name, EventCode, TimeTotal) %>% 
  # join to decode Event Code meaning
  inner_join(DF_EvCode, by = "EventCode") %>% head()
```

now we will select only columns we will need...

```{r}
read_csv("DF_Data.csv") %>% 
  # arrange by date 
  arrange(StartDateTime) %>% 
  # join to decode equipment serial number
  inner_join(DF_Equipm, by = "IDEquipment") %>% 
  # select only column needed
  select(StartDateTime, Name, EventCode, TimeTotal) %>% 
  # join to decode Event Code meaning
  inner_join(DF_EvCode, by = "EventCode") %>% 
  # select only column needed
  select(StartDateTime, Name, EventCode, TimeTotal, EventText) %>% head()
```

